<section ng-controller="db.tableview as table" ng-init="table.init(db.table)">

	<md-toolbar class="md-tall">
		<div class="md-toolbar-tools" ng-controller="LeftCtrl">
			<md-button ng-click="open('left')" hide-gt-md class="md-icon-button">
				<md-icon>menu</md-icon>
			</md-button>
			<h1 ng-bind="::storageTitle"></h1>
			<div flex></div>
			<md-menu md-offset="0 6">
				<md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="$mdOpenMenu()">
					<md-icon>more_vert</md-icon>
				</md-button>
				<md-menu-content width="4">
					<md-menu-item>
						<md-button ng-click="db.deleteDatabase()">
							<md-icon>delete</md-icon>
							Delete database
						</md-button>
					</md-menu-item>

			        <md-menu-divider></md-menu-divider>

					<md-menu-item>
						<md-button ng-disabled="true">
				            <md-icon>file_upload</md-icon>
							Export (Not implented)
						</md-button>
					</md-menu-item>

					<md-menu-item>
						<md-button ng-disabled="true">
				            <md-icon>file_download</md-icon>
							Import (Not implented)
						</md-button>
					</md-menu-item>

			        <md-menu-divider></md-menu-divider>

					<md-menu-item>
						<md-button ng-href="#/">
				            <md-icon>home</md-icon>
							Dashboard
						</md-button>
					</md-menu-item>

				</md-menu-content>
			</md-menu>
		</div>
	</md-toolbar>

	<md-card>
		<md-data-table-container>
			<table md-data-table md-row-select="selected" md-progress="deferred" class="md-primary">
				<thead md-order="query.order" md-trigger="onOrderChange">
					<tr>
						<!-- <th width="1" numeric order-by="id">#id</th> -->
						<th name="Key" order-by="key"></th>
						<th Name="Value" order-by="val"></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="key in storage | orderBy:query.order | limitTo: query.limit: (query.page-1) * query.limit" ng-click="edit($event, key)">
						<!-- <td>{{key.id}}</td> -->
						<td ng-bind="key.key"></td>
						<td ng-bind="key.val"></td>
					</tr>
				</tbody>
			</table>
		</md-data-table-container>

		<md-data-table-pagination md-limit="query.limit" md-page="query.page" md-total="{{localStorage.length}}" md-trigger="onPaginationChange"></md-data-table-pagination>

	</md-card>

	<md-button ng-click="addRow($event)" class="md-accent md-fab md-fab-bottom-right">
		<md-icon md-font-set="material-icons">add</md-icon>
	</md-button>
</section>